apiVersion: v1
kind: Secret
metadata:
  name: ${component}-config
  namespace: karmada-system
stringData:
  karmada.config: |-
    apiVersion: v1
    kind: Config
    preferences: {}
    clusters:
    - name: karmada-apiserver
      cluster:
        certificate-authority-data: ${ca_crt}
        server: https://karmada-apiserver.karmada-system.svc.cluster.local:5443
    users:
    - name: karmada-apiserver
      user:
        client-certificate-data: ${client_crt}
        client-key-data: ${client_key}
    contexts:
    - name: karmada-apiserver
      context:
        cluster: karmada-apiserver
        user: karmada-apiserver
    current-context: karmada-apiserver

#   * 作用：为组件提供一个预配置好的 `kubeconfig` 文件。
#   * 详细解释：
#       * 这个 Secret 的 stringData 字段里包含了一个完整的 kubeconfig 文件内容。
#       * 这个 kubeconfig 文件预先配置好了 karmada-apiserver 的地址、用于验证 karmada-apiserver 的 CA 证书 (certificate-authority-data)，以及用于向
#         karmada-apiserver 表明自己身份的客户端证书和私钥 (client-certificate-data, client-key-data)。
#       * 当这个 Secret 被挂载到 karmada-controller-manager 或 karmada-scheduler 等组件的 Pod 中时，这些组件的客户端库（client-go）可以直接加载这个 kubeconfig
#         文件，从而轻松地与 karmada-apiserver 建立安全连接，无需再通过繁琐的命令行参数来分别指定 CA、证书和密钥的路径。
#   * 一句话总结：为组件提供访问 `karmada-apiserver` 的“客户端配置文件”，简化了客户端的配置。
